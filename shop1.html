<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
    <title>Home page of Andy's Store</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif
        }

        body {
            background: #f4f4f4
        }

        a {
            text-decoration: none;
            color: inherit
        }

        .page {
            display: none
        }

        .page.active {
            display: block
        }

        /* È°∂ÈÉ® - Ë¥≠Áâ©ËΩ¶Ê†∑Âºè */
        .top {
            background: #ff5000;
            color: #fff;
            padding: 14px 15px;
            font-weight: bold;
            font-size: 17px;
            text-align: center;
            position: relative;
        }

        .cart-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            cursor: pointer;
        }

        .cart-badge {
            position: absolute;
            right: -8px;
            top: -8px;
            background: #fff;
            color: #ff5000;
            font-size: 12px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        /* È¶ñÈ°µËΩÆÊí≠ */
        .swiper {
            margin: 0 15px;
            border-radius: 12px;
            overflow: hidden;
            height: 160px;
            position: relative
        }

        .slide {
            width: 100%;
            height: 160px;
            object-fit: cover;
            display: none
        }

        .slide.active {
            display: block
        }

        /* ÂàÜÁ±ª */
        .nav {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            background: #fff;
            margin: 10px 15px;
            border-radius: 12px;
            padding: 15px 0;
            gap: 5px
        }

        .nav-item {
            text-align: center;
            font-size: 12px
        }

        .nav-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 auto 5px;
            object-fit: cover;
            display: block;
        }

        /* ‰∫åÁ∫ßÂàÜÁ±ªÂØºËà™Ê†∑Âºè */
        .subcat-nav {
            background: #fff;
            margin: 10px 15px;
            border-radius: 12px;
            padding: 10px;
            overflow-x: auto;
            white-space: nowrap;
        }

        .subcat-item {
            display: inline-block;
            padding: 8px 15px;
            margin: 0 5px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            background: #f4f4f4;
            color: #333;
        }

        .subcat-item.active {
            background: #ff5000;
            color: #fff;
        }

        /* ÂïÜÂìÅ */
        .goods {
            margin: 0 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding-bottom: 15px
        }

        .goods-item {
            width: calc(50% - 5px);
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer
        }

        .goods-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .goods-info {
            padding: 10px
        }

        .goods-name {
            font-size: 14px;
            color: #333;
            height: 40px;
            overflow: hidden;
            margin-bottom: 6px
        }

        .goods-price {
            font-size: 16px;
            color: #ff5000;
            font-weight: bold
        }

        /* ÂàÜÁ±ªÈ°µÂïÜÂìÅ */
        .cat-goods {
            margin: 0 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding-bottom: 15px;
        }

        .cat-goods-item {
            width: calc(50% - 5px);
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
        }

        .cat-goods-img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .cat-goods-info {
            padding: 10px;
        }

        .cat-goods-name {
            font-size: 14px;
            color: #333;
            height: 40px;
            overflow: hidden;
            margin-bottom: 6px;
        }

        .cat-goods-price {
            font-size: 16px;
            color: #ff5000;
            font-weight: bold;
        }

        .back {
            padding: 10px 15px;
            color: #ff5000;
            font-size: 16px;
            cursor: pointer
        }

        .cat-title {
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            text-align: center
        }

        /* ÂïÜÂìÅËØ¶ÊÉÖÈ°µ - Â§öÂõæËΩÆÊí≠ */
        .detail-swiper {
            position: relative;
            width: 100%;
            height: 300px;
            overflow: hidden;
            background: #f0f0f0;
        }

        .detail-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
            cursor: pointer;
        }

        .detail-slide.active {
            display: block;
        }

        /* ËΩÆÊí≠ÁÆ≠Â§¥ */
        .swiper-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 36px;
            height: 36px;
            background: rgba(0, 0, 0, 0.5);
            color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            font-size: 18px;
        }

        .swiper-arrow.prev {
            left: 15px;
        }

        .swiper-arrow.next {
            right: 15px;
        }

        /* ËΩÆÊí≠ÊåáÁ§∫Âô® */
        .swiper-indicator {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .indicator-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
        }

        .indicator-dot.active {
            background: #fff;
        }

        .detail-info {
            padding: 15px;
            background: #fff;
            margin: 10px 0;
        }

        .detail-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .detail-price {
            font-size: 22px;
            color: #ff5000;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .add-cart-btn {
            display: block;
            width: 100%;
            background: #ff5000;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 12px 0;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
        }

        .add-cart-btn:active {
            background: #e04500;
        }

        /* Â§ßÂõæÂºπÁ™ó */
        .img-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            touch-action: none;
        }

        .modal-img {
            max-width: 95%;
            max-height: 95vh;
            object-fit: contain;
        }

        /* Ë¥≠Áâ©ËΩ¶È°µÈù¢Ê†∑Âºè */
        .cart-page {
            padding-bottom: 80px;
        }

        .cart-empty {
            text-align: center;
            padding: 50px 0;
            color: #999;
            font-size: 16px;
        }

        .cart-empty i {
            font-size: 60px;
            margin-bottom: 20px;
            display: block;
        }

        .cart-item {
            background: #fff;
            margin: 10px 15px;
            border-radius: 12px;
            padding: 15px;
            display: flex;
            gap: 15px;
            cursor: pointer;
        }

        .cart-item-img {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .cart-item-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .cart-item-name {
            font-size: 15px;
            color: #333;
            margin-bottom: 5px;
        }

        .cart-item-price {
            font-size: 16px;
            color: #ff5000;
            font-weight: bold;
        }

        .cart-item-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid #ddd;
            background: #fff;
            color: #333;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1;
        }

        .cart-count {
            font-size: 14px;
            min-width: 20px;
            text-align: center;
            z-index: 1;
        }

        .cart-delete {
            color: #999;
            font-size: 14px;
            cursor: pointer;
            z-index: 1;
        }

        .cart-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #fff;
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-total {
            font-size: 18px;
            font-weight: bold;
        }

        .cart-total-price {
            color: #ff5000;
        }

        .cart-checkout {
            background: #ff5000;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        .cart-checkout:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* ÈÄöÁî®ÂºπÁ™óÊ†∑Âºè */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 99999;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(2px);
        }

        .modal.active {
            display: flex;
            animation: modalFadeIn 0.3s ease;
        }

        .modal-content {
            background: #fff;
            border-radius: 16px;
            width: 85%;
            max-width: 400px;
            padding: 25px 20px;
            position: relative;
            transform: scale(0.9);
            animation: modalScaleIn 0.3s ease forwards;
        }

        .modal-title {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }

        .modal-body {
            font-size: 16px;
            color: #666;
            text-align: center;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .modal-btn {
            flex: 1;
            padding: 12px 0;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .modal-btn.cancel {
            background: #f4f4f4;
            color: #666;
        }

        .modal-btn.confirm {
            background: #ff5000;
            color: #fff;
        }

        .modal-btn.single {
            width: 100%;
        }

        /* ÂºπÁ™óÂä®Áîª */
        @keyframes modalFadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes modalScaleIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- È¶ñÈ°µ -->
    <div class="page active" id="home">
        <div class="top">
            Andy's Store
            <div class="cart-icon" onclick="goToCart()">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-badge" id="cartBadge">0</span>
            </div>
        </div>
        <div class="swiper">
            <img src="./img/ÂìàÂ£´Â•á.jpg" alt="Banner 1" class="slide active"
                onerror="this.src='https://via.placeholder.com/375x160?text=Image+Not+Found'">
            <img src="./img/ÁÜäÁå´.jpg" alt="Banner 2" class="slide"
                onerror="this.src='https://via.placeholder.com/375x160?text=Image+Not+Found'">
            <img src="./img/Â§ßÈ¶ôËïâ.jpg" alt="Banner 3" class="slide"
                onerror="this.src='https://via.placeholder.com/375x160?text=Image+Not+Found'">
        </div>
        <div class="nav">
            <a class="nav-item" onclick="goCat('Clothing')">
                <img class="nav-icon" src="./img/Ë°£Êúç1.png" alt="Clothing"
                    onerror="this.src='https://via.placeholder.com/40x40?text=Icon'">
                Clothing
            </a>
            <a class="nav-item" onclick="goCat('Bag')">
                <img class="nav-icon" src="./img/ÂåÖÂåÖ.png" alt="Bag"
                    onerror="this.src='https://via.placeholder.com/40x40?text=Icon'">
                Bag
            </a>
            <a class="nav-item" onclick="goCat('jewelry')">
                <img class="nav-icon" src="./img/Á≤æÂìÅ.png" alt="Fine Jewelry"
                    onerror="this.src='https://via.placeholder.com/40x40?text=Icon'">
                Fine jewelry
            </a>
            <a class="nav-item" onclick="goCat('Hat')">
                <img class="nav-icon" src="./img/È∏≠ËàåÂ∏Ω.png" alt="Hat"
                    onerror="this.src='https://via.placeholder.com/40x40?text=Icon'">
                Hat
            </a>
            <a class="nav-item" onclick="goCat('Backpack')">
                <img class="nav-icon" src="./img/‰π¶ÂåÖ.png" alt="Backpack"
                    onerror="this.src='https://via.placeholder.com/40x40?text=Icon'">
                Backpack
            </a>
        </div>
        <div style="padding:10px 15px;font-size:32px;font-weight:bold">New style</div>
        <div class="goods">
            <div class="goods-item" onclick="goToDetail({
                img:'./img/YF-647.jpg',
                name:'NO:647',
                price:'JMB:1000/1400',
                id:'YF-647',
                images:['./img/YF-647.jpg','./img/YF-651.jpg','./img/YF-661.jpg']
            })">
                <img src="./img/YF-647.jpg" alt="NO:647" class="goods-img"
                    onerror="this.src='https://via.placeholder.com/180x180?text=Product+Image'">
                <div class="goods-info">
                    <div class="goods-name">NO:647</div>
                    <div class="goods-price">JMB:1000/1400</div>
                </div>
            </div>
            <div class="goods-item" onclick="goToDetail({
                img:'./img/YF-651.jpg',
                name:'NO:651',
                price:'JMB:1000/1400',
                id:'YF-651',
                images:['./img/YF-651.jpg','./img/YF-661.jpg','./img/YF-9636.jpg']
            })">
                <img src="./img/YF-651.jpg" alt="NO:651" class="goods-img"
                    onerror="this.src='https://via.placeholder.com/180x180?text=Product+Image'">
                <div class="goods-info">
                    <div class="goods-name">NO:651</div>
                    <div class="goods-price">JMB:1000/1400</div>
                </div>
            </div>
            <div class="goods-item" onclick="goToDetail({
                img:'./img/YF-661.jpg',
                name:'NO:661',
                price:'JMB:1000/1400',
                id:'YF-661',
                images:['./img/YF-661.jpg','./img/YF-9636.jpg','./img/YF-MX073.jpg']
            })">
                <img src="./img/YF-661.jpg" alt="NO:661" class="goods-img"
                    onerror="this.src='https://via.placeholder.com/180x180?text=Product+Image'">
                <div class="goods-info">
                    <div class="goods-name">NO:661</div>
                    <div class="goods-price">JMB:1000/1400</div>
                </div>
            </div>
            <div class="goods-item" onclick="goToDetail({
                img:'./img/YF-9636.jpg',
                name:'NO:9636',
                price:'JMB:1000/1400',
                id:'YF-9636',
                images:['./img/YF-9636.jpg','./img/YF-MX073.jpg','./img/YF-656.jpg']
            })">
                <img src="./img/YF-9636.jpg" alt="NO:9636" class="goods-img"
                    onerror="this.src='https://via.placeholder.com/180x180?text=Product+Image'">
                <div class="goods-info">
                    <div class="goods-name">NO:9636</div>
                    <div class="goods-price">JMB:1000/1400</div>
                </div>
            </div>
            <div class="goods-item" onclick="goToDetail({
                img:'./img/YF-MX073.jpg',
                name:'NO:MX073',
                price:'JMB:1000/1400',
                id:'YF-MX073',
                images:['./img/YF-MX073.jpg','./img/YF-656.jpg','./img/YF-6033.jpg']
            })">
                <img src="./img/YF-MX073.jpg" alt="NO:MX073" class="goods-img"
                    onerror="this.src='https://via.placeholder.com/180x180?text=Product+Image'">
                <div class="goods-info">
                    <div class="goods-name">NO:MX073</div>
                    <div class="goods-price">JMB:1000/1400</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂàÜÁ±ªÈ°µÈù¢ÔºàÂ¢ûÂä†‰∫åÁ∫ßÂàÜÁ±ªÂÆπÂô®Ôºâ -->
    <div class="page" id="category">
        <div class="back" onclick="goBack()">‚Üê Return</div>
        <div class="cat-title" id="catName">Category</div>
        <!-- ‰∫åÁ∫ßÂàÜÁ±ªÂØºËà™Ê†è -->
        <div class="subcat-nav" id="subcatNav"></div>
        <div class="cat-goods" id="catList"></div>
    </div>

    <!-- ÂïÜÂìÅËØ¶ÊÉÖÈ°µ - ÊîØÊåÅËá™ÂÆö‰πâÂ§öÂº†ÂõæÁâá -->
    <div class="page" id="detail">
        <div class="back" onclick="goBack()">‚Üê Return</div>
        <div class="detail-swiper" id="detailSwiper">
            <div id="detailSlides"></div>
            <div class="swiper-arrow prev" onclick="prevDetailSlide()">
                <i class="fas fa-chevron-left"></i>
            </div>
            <div class="swiper-arrow next" onclick="nextDetailSlide()">
                <i class="fas fa-chevron-right"></i>
            </div>
            <div class="swiper-indicator" id="detailIndicator"></div>
        </div>
        <div class="detail-info">
            <div id="detailName" class="detail-name"></div>
            <div id="detailPrice" class="detail-price"></div> <!-- ‰øÆÂ§çclassÂêçÊãºÂÜôÈîôËØØ -->
            <button class="add-cart-btn" onclick="addToCart()">Add to Cart</button>
        </div>
    </div>

    <!-- Ë¥≠Áâ©ËΩ¶È°µÈù¢ -->
    <div class="page cart-page" id="cart">
        <div class="back" onclick="goBack()">‚Üê Return</div>
        <div class="cat-title">My Cart</div>
        <div class="cart-empty" id="cartEmpty">
            <i class="fas fa-shopping-cart"></i>
            <p>The shopping cart is empty~</p>
            <p style="margin-top:10px;">Go add some products quickly.</p>
        </div>
        <div id="cartList"></div>
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total">
                Total: <span class="cart-total-price" id="cartTotalPrice">0</span>
            </div>
            <button class="cart-checkout" id="checkoutBtn">Empty the cart</button>
        </div>
    </div>

    <!-- Â§ßÂõæÂºπÁ™ó -->
    <div class="img-modal" id="bigImgModal" onclick="closeBigImg()">
        <img id="bigImg" class="modal-img" onerror="this.src='https://via.placeholder.com/800x800?text=Big+Image'">
    </div>

    <!-- ÈÄöÁî®ÂºπÁ™ó -->
    <div class="modal" id="customModal">
        <div class="modal-content">
            <div class="modal-title" id="modalTitle">Special Offer</div>
            <div class="modal-body" id="modalBody">üéâ Welcome to Andy's shop!! üéâ</div>
            <div class="modal-footer" id="modalFooter">
                <button class="modal-btn confirm single" onclick="hideModal()">OK</button>
            </div>
        </div>
    </div>

    <script>
        // ÈáçÊûÑÊï∞ÊçÆÁªìÊûÑÔºöÂàÜÁ±ªÂïÜÂìÅÂ¢ûÂä†Ëá™ÂÆö‰πâimagesÂ≠óÊÆµÔºåÊîØÊåÅÊåáÂÆöÂ§öÂº†ËØ¶ÊÉÖÂõæ
        const catData = {
            Clothing: {
                subCats: ['All', 'Jacket', 'Shirt', 'Pants', 'Dress'],
                products: {
                    All: [
                        { img: "./img/YF-647.jpg", name: "NO:647", price: "JMB:1000/1400", id: "YF-647", images: ['./img/YF-647-1.jpg', './img/YF-647-2.jpg', './img/YF-647-3.jpg'] }, // Ëá™ÂÆö‰πâ3Âº†Âõæ
                        { img: "./img/YF-651.jpg", name: "NO:651", price: "JMB:1000/1400", id: "YF-651", images: ['./img/YF-651-1.jpg', './img/YF-651-2.jpg'] }, // Ëá™ÂÆö‰πâ2Âº†Âõæ
                        { img: "./img/YF-661.jpg", name: "NO:661", price: "JMB:1000/1400", id: "YF-661", images: ['./img/YF-661-1.jpg', './img/YF-661-2.jpg', './img/YF-661-3.jpg', './img/YF-661-4.jpg'] }, // Ëá™ÂÆö‰πâ4Âº†Âõæ
                        { img: "./img/YF-9636.jpg", name: "NO:9636", price: "JMB:1000/1400", id: "YF-9636", images: ['./img/YF-9636-1.jpg'] }, // Ëá™ÂÆö‰πâ1Âº†Âõæ
                        { img: "./img/YF-MX073.jpg", name: "NO:MX073", price: "JMB:1000/1400", id: "YF-MX073", images: ['./img/YF-MX073-1.jpg', './img/YF-MX073-2.jpg'] },
                        { img: "./img/YF-656.jpg", name: "NO:656", price: "JMB:1000/1400", id: "YF-656", images: ['./img/YF-656-1.jpg', './img/YF-656-2.jpg', './img/YF-656-3.jpg'] },
                        { img: "./img/YF-6033.jpg", name: "NO:6033", price: "JMB:1100/1500", id: "YF-6033", images: ['./img/YF-6033-1.jpg'] },
                        { img: "./img/YF-8021.jpg", name: "NO:8021", price: "JMB:1000/1400", id: "YF-8021", images: ['./img/YF-8021-1.jpg', './img/YF-8021-2.jpg'] },
                        { img: "./img/YF-8026.jpg", name: "NO:8026", price: "JMB:1000/1400", id: "YF-8026", images: ['./img/YF-8026-1.jpg', './img/YF-8026-2.jpg', './img/YF-8026-3.jpg'] },
                        { img: "./img/YF-9649.jpg", name: "NO:9649", price: "JMB:1000/1400", id: "YF-9649", images: ['./img/YF-9649-1.jpg', './img/YF-9649-2.jpg'] }
                    ],
                    Jacket: [
                        { img: "./img/YF-647.jpg", name: "NO:647", price: "JMB:1000/1400", id: "YF-647", images: ['./img/YF-647-1.jpg', './img/YF-647-2.jpg', './img/YF-647-3.jpg'] },
                        { img: "./img/YF-651.jpg", name: "NO:651", price: "JMB:1000/1400", id: "YF-651", images: ['./img/YF-651-1.jpg', './img/YF-651-2.jpg'] },
                        { img: "./img/YF-661.jpg", name: "NO:661", price: "JMB:1000/1400", id: "YF-661", images: ['./img/YF-661-1.jpg', './img/YF-661-2.jpg', './img/YF-661-3.jpg', './img/YF-661-4.jpg'] }
                    ],
                    Shirt: [
                        { img: "./img/YF-9636.jpg", name: "NO:9636", price: "JMB:1000/1400", id: "YF-9636", images: ['./img/YF-9636-1.jpg'] },
                        { img: "./img/YF-MX073.jpg", name: "NO:MX073", price: "JMB:1000/1400", id: "YF-MX073", images: ['./img/YF-MX073-1.jpg', './img/YF-MX073-2.jpg'] }
                    ],
                    Pants: [
                        { img: "./img/YF-656.jpg", name: "NO:656", price: "JMB:1000/1400", id: "YF-656", images: ['./img/YF-656-1.jpg', './img/YF-656-2.jpg', './img/YF-656-3.jpg'] },
                        { img: "./img/YF-6033.jpg", name: "NO:6033", price: "JMB:1100/1500", id: "YF-6033", images: ['./img/YF-6033-1.jpg'] }
                    ],
                    Dress: [
                        { img: "./img/YF-8021.jpg", name: "NO:8021", price: "JMB:1000/1400", id: "YF-8021", images: ['./img/YF-8021-1.jpg', './img/YF-8021-2.jpg'] },
                        { img: "./img/YF-8026.jpg", name: "NO:8026", price: "JMB:1000/1400", id: "YF-8026", images: ['./img/YF-8026-1.jpg', './img/YF-8026-2.jpg', './img/YF-8026-3.jpg'] },
                        { img: "./img/YF-9649.jpg", name: "NO:9649", price: "JMB:1000/1400", id: "YF-9649", images: ['./img/YF-9649-1.jpg', './img/YF-9649-2.jpg'] }
                    ]
                }
            },
            Bag: {
                subCats: ['All', 'Beachbag', 'Fabricbag', 'Shoulderbag', 'Handbag'],
                products: {
                    All: [
                        { img: "./img-BB/12-28.jpg", name: "NO:12-28", price: "JMD:1200/1500", id: "12-28", images: ['./img-BB/12-28.jpg'] },
                        { img: "./img-BB/13-23.jpg", name: "NO:13-23", price: "JMD:1200/1500", id: "13-23", images: ['./img-BB/13-23.jpg'] },
                        { img: "./img-BB/13-49.jpg", name: "NO:13-49", price: "JMD:1200/1500", id: "13-49", images: ['./img-BB/13-49.jpg'] },
                        { img: "./img-BB/13-97.jpg", name: "NO:13-97", price: "JMD:1200/1500", id: "13-97", images: ['./img-BB/13-97.jpg'] },
                        { img: "./img-BB/13-102.jpg", name: "NO:13-102", price: "JMD:1200/1500", id: "13-102", images: ['./img-BB/13-102.jpg', './img-BB/13-102-1.jpg', './img-BB/13-102-2.jpg', './img-BB/13-102-3.jpg'] },
                        { img: "./img-BB/13-107-1.jpg", name: "NO:13-107-1", price: "JMD:1200/1500", id: "13-107-1", images: ['./img-BB/13-107-1.jpg', './img-BB/13-107-2.jpg', './img-BB/13-107-3.jpg'] },
                        { img: "./img-BB/13-108-1.jpg", name: "NO:13-108-1", price: "JMD:1200/1500", id: "13-108-1", images: ['./img-BB/13-108-1.jpg', './img-BB/13-108-2.jpg', './img-BB/13-108-3.jpg', './img-BB/13-108-4.jpg'] },
                        { img: "./img-BB/13-109-1.jpg", name: "NO:13-109-1", price: "JMD:1200/1500", id: "13-109-1", images: ['./img-BB/13-109-1.jpg', './img-BB/13-109-2.jpg'] },
                        { img: "./img-BB/17.jpg", name: "NO:17", price: "JMD:1200/1500", id: "17", images: ['./img-BB/17.jpg'] },
                        { img: "./img-BB/18.jpg", name: "NO:18", price: "JMD:1200/1500", id: "18", images: ['./img-BB/18.jpg'] },
                        { img: "./img-BB/22-12.jpg", name: "NO:22-12", price: "JMD:1200/1500", id: "22-12", images: ['./img-BB/22-12.jpg'] },
                        { img: "./img-BB/22-17.jpg", name: "NO:22-17", price: "JMD:1200/1500", id: "22-17", images: ['./img-BB/22-17.jpg'] },
                        { img: "./img-BB/22-21.jpg", name: "NO:22-21", price: "JMD:1200/1500", id: "22-21", images: ['./img-BB/22-21.jpg'] },
                        { img: "./img-BB/22-30.jpg", name: "NO:22-30", price: "JMD:1200/1500", id: "22-30", images: ['./img-BB/22-30.jpg'] },
                        { img: "./img-BB/22-56.jpg", name: "NO:22-56", price: "JMD:1200/1500", id: "22-56", images: ['./img-BB/22-56.jpg'] },
                        { img: "./img-BB/22-57.jpg", name: "NO:22-57", price: "JMD:1200/1500", id: "22-57", images: ['./img-BB/22-57.jpg'] },
                        { img: "./img-BB/22-69.jpg", name: "NO:22-69", price: "JMD:1200/1500", id: "22-69", images: ['./img-BB/22-69.jpg'] },
                        { img: "./img-BB/22-78.jpg", name: "NO:22-78", price: "JMD:1200/1500", id: "22-78", images: ['./img-BB/22-78.jpg'] },
                        { img: "./img-BB/25.jpg", name: "NO:25", price: "JMD:1200/1500", id: "25", images: ['./img-BB/25.jpg'] },
                        { img: "./img-BB/26.jpg", name: "NO:26", price: "JMD:1200/1500", id: "26", images: ['./img-BB/26.jpg'] },
                        { img: "./img-BB/27.jpg", name: "NO:27", price: "JMD:1200/1500", id: "27", images: ['./img-BB/27.jpg'] },
                        { img: "./img-BB/28.jpg", name: "NO:28", price: "JMD:1200/1500", id: "28", images: ['./img-BB/28.jpg'] },
                        { img: "./img-BB/132-1.jpg", name: "NO:132-1", price: "JMD:1200/1500", id: "132-1", images: ['./img-BB/132-1.jpg'] },
                        { img: "./img-BB/133-1.jpg", name: "NO:133-1", price: "JMD:1200/1500", id: "133-1", images: ['./img-BB/133-1.jpg'] },
                        { img: "./img-BB/139-1.jpg", name: "NO:139-1", price: "JMD:1200/1500", id: "139-1", images: ['./img-BB/139-1.jpg'] },
                        { img: "./img-BB/305-1.jpg", name: "NO:305-1", price: "JMD:1200/1500", id: "305-1", images: ['./img-BB/305-1.jpg'] },
                        { img: "./img-BB/307-1.jpg", name: "NO:307-1", price: "JMD:1200/1500", id: "307-1", images: ['./img-BB/307-1.jpg'] },
                        { img: "./img-BB/308-1.jpg", name: "NO:308-1", price: "JMD:1200/1500", id: "308-1", images: ['./img-BB/308-1.jpg'] },
                        { img: "./img-BB/604.jpg", name: "NO:604", price: "JMD:1200/1500", id: "604", images: ['./img-BB/604.jpg'] },
                        { img: "./img-BB/604.jpg", name: "NO:605", price: "JMD:1200/1500", id: "605", images: ['./img-BB/605.jpg'] },
                        { img: "./img-BB/C202-1.jpg", name: "NO:C202-1", price: "JMD:1200/1500", id: "C202-1", images: ['./img-BB/C202-1.jpg'] },
                        { img: "./img-BB/C203-1.jpg", name: "NO:C203-1", price: "JMD:1200/1500", id: "C203-1", images: ['./img-BB/C203-1.jpg'] },
                        { img: "./img-BB/CAOBIAN.jpg", name: "NO:CAOBIAN", price: "JMD:1200/1500", id: "CAOBIAN", images: ['./img-BB/CAOBIAN.jpg'] },
                        { img: "./img-BB/DBI-41.jpg", name: "NO:DBI-41", price: "JMD:1200/1500", id: "DBI-41", images: ['./img-BB/DBI-41.jpg'] },
                        { img: "./img-BB/DBI-45.jpg", name: "NO:DBI-45", price: "JMD:1200/1500", id: "DBI-45", images: ['./img-BB/DBI-45.jpg'] },
                        { img: "./img-BB/FDBI-15.jpg", name: "NO:FDBI-15", price: "JMD:1200/1500", id: "FDBI-15", images: ['./img-BB/FDBI-15.jpg'] },
                        { img: "./img-BB/FDBI-31.jpg", name: "NO:FDBI-31", price: "JMD:1200/1500", id: "FDBI-31", images: ['./img-BB/FDBI-31.jpg'] },
                        { img: "./img-BB/FDBI-32.jpg", name: "NO:FDBI-32", price: "JMD:1200/1500", id: "FDBI-32", images: ['./img-BB/FDBI-32.jpg'] },
                        { img: "./img-BB/FDBI-34.jpg", name: "NO:FDBI-34", price: "JMD:1200/1500", id: "FDBI-34", images: ['./img-BB/FDBI-34.jpg'] },
                        { img: "./img-BB/FDBI-37.jpg", name: "NO:FDBI-37", price: "JMD:1200/1500", id: "FDBI-37", images: ['./img-BB/FDBI-37.jpg'] },
                        { img: "./img-BB/FDBI-39.jpg", name: "NO:FDBI-39", price: "JMD:1200/1500", id: "FDBI-39", images: ['./img-BB/FDBI-39.jpg'] },
                        { img: "./img-BB/FDBI-41.jpg", name: "NO:FDBI-41", price: "JMD:1200/1500", id: "FDBI-41", images: ['./img-BB/FDBI-41.jpg'] },
                        { img: "./img-BB/SY252.jpg", name: "NO:SY252", price: "JMD:2000/2500", id: "SY252", images: ['./img-BB/SY252.jpg'] }
                    ],
                    Beachbag: [
                        { img: "./img-BB/13-97.jpg", name: "NO:13-97", price: "JMD:1200/1500", id: "13-97", images: ['./img-BB/13-97.jpg'] },
                        { img: "./img-BB/13-102.jpg", name: "NO:13-102", price: "JMD:1200/1500", id: "13-102", images: ['./img-BB/13-102.jpg', './img-BB/13-102-1.jpg', './img-BB/13-102-2.jpg', './img-BB/13-102-3.jpg'] },
                        { img: "./img-BB/CAOBIAN.jpg", name: "NO:CAOBIAN", price: "JMD:1200/1500", id: "CAOBIAN", images: ['./img-BB/CAOBIAN.jpg'] },
                        { img: "./img-BB/13-107-1.jpg", name: "NO:13-107-1", price: "JMD:1200/1500", id: "13-107-1", images: ['./img-BB/13-107-1.jpg', './img-BB/13-107-2.jpg', './img-BB/13-107-3.jpg'] },
                        { img: "./img-BB/13-108-1.jpg", name: "NO:13-108-1", price: "JMD:1200/1500", id: "13-108-1", images: ['./img-BB/13-108-1.jpg', './img-BB/13-108-2.jpg', './img-BB/13-108-3.jpg', './img-BB/13-108-4.jpg'] },
                        { img: "./img-BB/13-109-1.jpg", name: "NO:13-109-1", price: "JMD:1200/1500", id: "13-109-1", images: ['./img-BB/13-109-1.jpg', './img-BB/13-109-2.jpg'] }
                    ],
                    Fabricbag: [
                        { img: "./img-BB/12-28.jpg", name: "NO:12-28", price: "JMD:1200/1500", id: "12-28", images: ['./img-BB/12-28.jpg'] },
                        { img: "./img-BB/DBI-41.jpg", name: "NO:DBI-41", price: "JMD:1200/1500", id: "DBI-41", images: ['./img-BB/DBI-41.jpg'] },
                        { img: "./img-BB/DBI-45.jpg", name: "NO:DBI-45", price: "JMD:1200/1500", id: "DBI-45", images: ['./img-BB/DBI-45.jpg'] },
                        { img: "./img-BB/FDBI-15.jpg", name: "NO:FDBI-15", price: "JMD:1200/1500", id: "FDBI-15", images: ['./img-BB/FDBI-15.jpg'] },
                        { img: "./img-BB/FDBI-31.jpg", name: "NO:FDBI-31", price: "JMD:1200/1500", id: "FDBI-31", images: ['./img-BB/FDBI-31.jpg'] },
                        { img: "./img-BB/FDBI-32.jpg", name: "NO:FDBI-32", price: "JMD:1200/1500", id: "FDBI-32", images: ['./img-BB/FDBI-32.jpg'] },
                        { img: "./img-BB/FDBI-34.jpg", name: "NO:FDBI-34", price: "JMD:1200/1500", id: "FDBI-34", images: ['./img-BB/FDBI-34.jpg'] },
                        { img: "./img-BB/FDBI-37.jpg", name: "NO:FDBI-37", price: "JMD:1200/1500", id: "FDBI-37", images: ['./img-BB/FDBI-37.jpg'] },
                        { img: "./img-BB/FDBI-39.jpg", name: "NO:FDBI-39", price: "JMD:1200/1500", id: "FDBI-39", images: ['./img-BB/FDBI-39.jpg'] },
                        { img: "./img-BB/FDBI-41.jpg", name: "NO:FDBI-41", price: "JMD:1200/1500", id: "FDBI-41", images: ['./img-BB/FDBI-41.jpg'] }
                    ],
                    Shoulderbag: [
                        { img: "./img-BB/25.jpg", name: "NO:25", price: "JMD:1200/1500", id: "25", images: ['./img-BB/25.jpg'] },
                        { img: "./img-BB/26.jpg", name: "NO:26", price: "JMD:1200/1500", id: "26", images: ['./img-BB/26.jpg'] },
                        { img: "./img-BB/27.jpg", name: "NO:27", price: "JMD:1200/1500", id: "27", images: ['./img-BB/27.jpg'] },
                        { img: "./img-BB/28.jpg", name: "NO:28", price: "JMD:1200/1500", id: "28", images: ['./img-BB/28.jpg'] },
                        { img: "./img-BB/132-1.jpg", name: "NO:132-1", price: "JMD:1200/1500", id: "132-1", images: ['./img-BB/132-1.jpg'] },
                        { img: "./img-BB/133-1.jpg", name: "NO:133-1", price: "JMD:1200/1500", id: "133-1", images: ['./img-BB/133-1.jpg'] },
                        { img: "./img-BB/139-1.jpg", name: "NO:139-1", price: "JMD:1200/1500", id: "139-1", images: ['./img-BB/139-1.jpg'] },
                        { img: "./img-BB/305-1.jpg", name: "NO:305-1", price: "JMD:1200/1500", id: "305-1", images: ['./img-BB/305-1.jpg'] },
                        { img: "./img-BB/307-1.jpg", name: "NO:307-1", price: "JMD:1200/1500", id: "307-1", images: ['./img-BB/307-1.jpg'] },
                        { img: "./img-BB/308-1.jpg", name: "NO:308-1", price: "JMD:1200/1500", id: "308-1", images: ['./img-BB/308-1.jpg'] },
                        { img: "./img-BB/604.jpg", name: "NO:604", price: "JMD:1200/1500", id: "604", images: ['./img-BB/604.jpg'] },
                        { img: "./img-BB/604.jpg", name: "NO:605", price: "JMD:1200/1500", id: "605", images: ['./img-BB/605.jpg'] },
                        { img: "./img-BB/SY252.jpg", name: "NO:SY252", price: "JMD:2000/2500", id: "SY252", images: ['./img-BB/SY252.jpg'] }
                    ],
                    Handbag: [
                        { img: "./img-BB/13-23.jpg", name: "NO:13-23", price: "JMD:1200/1500", id: "13-23", images: ['./img-BB/13-23.jpg'] },
                        { img: "./img-BB/13-49.jpg", name: "NO:13-49", price: "JMD:1200/1500", id: "13-49", images: ['./img-BB/13-49.jpg'] },
                        { img: "./img-BB/22-12.jpg", name: "NO:22-12", price: "JMD:1200/1500", id: "22-12", images: ['./img-BB/22-12.jpg'] },
                        { img: "./img-BB/22-17.jpg", name: "NO:22-17", price: "JMD:1200/1500", id: "22-17", images: ['./img-BB/22-17.jpg'] },
                        { img: "./img-BB/22-21.jpg", name: "NO:22-21", price: "JMD:1200/1500", id: "22-21", images: ['./img-BB/22-21.jpg'] },
                        { img: "./img-BB/22-30.jpg", name: "NO:22-30", price: "JMD:1200/1500", id: "22-30", images: ['./img-BB/22-30.jpg'] },
                        { img: "./img-BB/22-56.jpg", name: "NO:22-56", price: "JMD:1200/1500", id: "22-56", images: ['./img-BB/22-56.jpg'] },
                        { img: "./img-BB/22-57.jpg", name: "NO:22-57", price: "JMD:1200/1500", id: "22-57", images: ['./img-BB/22-57.jpg'] },
                        { img: "./img-BB/22-69.jpg", name: "NO:22-69", price: "JMD:1200/1500", id: "22-69", images: ['./img-BB/22-69.jpg'] },
                        { img: "./img-BB/22-78.jpg", name: "NO:22-78", price: "JMD:1200/1500", id: "22-78", images: ['./img-BB/22-78.jpg'] },
                    ]
                }
            },
            jewelry: {
                subCats: ['All', 'Necklace', 'Bracelet', 'Earrings', 'Ring'],
                products: {
                    All: [
                        { img: "./img/ÂìàÂ£´Â•á.jpg", name: "Versatile White Shoes", price: "129", id: "jewelry-1", images: ['./img/ÂìàÂ£´Â•á-1.jpg', './img/ÂìàÂ£´Â•á-2.jpg'] },
                        { img: "./img/ÁÜäÁå´.jpg", name: "Fashion Shoulder Bag", price: "159", id: "jewelry-2", images: ['./img/ÁÜäÁå´-1.jpg', './img/ÁÜäÁå´-2.jpg', './img/ÁÜäÁå´-3.jpg'] },
                        { img: "./img/Â§ßÈ¶ôËïâ.jpg", name: "Thick-soled Dad Shoes", price: "179", id: "jewelry-3", images: ['./img/Â§ßÈ¶ôËïâ-1.jpg'] },
                        { img: "./img/ÁÜäÁå´.jpg", name: "Leisure Backpack", price: "99", id: "jewelry-4", images: ['./img/ÁÜäÁå´-4.jpg', './img/ÁÜäÁå´-5.jpg'] }
                    ],
                    Necklace: [
                        { img: "./img/ÂìàÂ£´Â•á.jpg", name: "Versatile White Shoes", price: "129", id: "jewelry-1", images: ['./img/ÂìàÂ£´Â•á-1.jpg', './img/ÂìàÂ£´Â•á-2.jpg'] }
                    ],
                    Bracelet: [
                        { img: "./img/ÁÜäÁå´.jpg", name: "Fashion Shoulder Bag", price: "159", id: "jewelry-2", images: ['./img/ÁÜäÁå´-1.jpg', './img/ÁÜäÁå´-2.jpg', './img/ÁÜäÁå´-3.jpg'] }
                    ],
                    Earrings: [
                        { img: "./img/Â§ßÈ¶ôËïâ.jpg", name: "Thick-soled Dad Shoes", price: "179", id: "jewelry-3", images: ['./img/Â§ßÈ¶ôËïâ-1.jpg'] }
                    ],
                    Ring: [
                        { img: "./img/ÁÜäÁå´.jpg", name: "Leisure Backpack", price: "99", id: "jewelry-4", images: ['./img/ÁÜäÁå´-4.jpg', './img/ÁÜäÁå´-5.jpg'] }
                    ]
                }
            },
            Hat: {
                subCats: ['All', 'Baseball', 'Bucket', 'Beanie', 'Cap'],
                products: {
                    All: [
                        { img: "./img/ÂìàÂ£´Â•á.jpg", name: "Smart Rice Cooker", price: "299", id: "hat-1", images: ['./img/ÂìàÂ£´Â•á-3.jpg', './img/ÂìàÂ£´Â•á-4.jpg'] },
                        { img: "./img/ÁÜäÁå´.jpg", name: "Wireless Vacuum Cleaner", price: "499", id: "hat-2", images: ['./img/ÁÜäÁå´-6.jpg', './img/ÁÜäÁå´-7.jpg', './img/ÁÜäÁå´-8.jpg'] },
                        { img: "./img/Â§ßÈ¶ôËïâ.jpg", name: "Rechargeable Electric Toothbrush", price: "129", id: "hat-3", images: ['./img/Â§ßÈ¶ôËïâ-2.jpg'] },
                        { img: "./img/ÁÜäÁå´.jpg", name: "Multifunctional Air Fryer", price: "329", id: "hat-4", images: ['./img/ÁÜäÁå´-9.jpg', './img/ÁÜäÁå´-10.jpg'] }
                    ],
                    Baseball: [
                        { img: "./img/ÂìàÂ£´Â•á.jpg", name: "Smart Rice Cooker", price: "299", id: "hat-1", images: ['./img/ÂìàÂ£´Â•á-3.jpg', './img/ÂìàÂ£´Â•á-4.jpg'] }
                    ],
                    Bucket: [
                        { img: "./img/ÁÜäÁå´.jpg", name: "Wireless Vacuum Cleaner", price: "499", id: "hat-2", images: ['./img/ÁÜäÁå´-6.jpg', './img/ÁÜäÁå´-7.jpg', './img/ÁÜäÁå´-8.jpg'] }
                    ],
                    Beanie: [
                        { img: "./img/Â§ßÈ¶ôËïâ.jpg", name: "Rechargeable Electric Toothbrush", price: "129", id: "hat-3", images: ['./img/Â§ßÈ¶ôËïâ-2.jpg'] }
                    ],
                    Cap: [
                        { img: "./img/ÁÜäÁå´.jpg", name: "Multifunctional Air Fryer", price: "329", id: "hat-4", images: ['./img/ÁÜäÁå´-9.jpg', './img/ÁÜäÁå´-10.jpg'] }
                    ]
                }
            },
            Backpack: {
                subCats: ['All', 'School', 'Travel', 'Sports', 'Business'],
                products: {
                    All: [
                        { img: "./img/ÂìàÂ£´Â•á.jpg", name: "Fresh Cream Strawberries", price: "49", id: "backpack-1", images: ['./img/ÂìàÂ£´Â•á-5.jpg', './img/ÂìàÂ£´Â•á-6.jpg'] },
                        { img: "./img/ÁÜäÁå´.jpg", name: "Farm Raised Eggs", price: "39", id: "backpack-2", images: ['./img/ÁÜäÁå´-11.jpg', './img/ÁÜäÁå´-12.jpg', './img/ÁÜäÁå´-13.jpg'] },
                        { img: "./img/Â§ßÈ¶ôËïâ.jpg", name: "Fresh Deep Sea Prawns", price: "129", id: "backpack-3", images: ['./img/Â§ßÈ¶ôËïâ-3.jpg'] },
                        { img: "./img/ÁÜäÁå´.jpg", name: "Original Cut Snow Beef", price: "199", id: "backpack-4", images: ['./img/ÁÜäÁå´-14.jpg', './img/ÁÜäÁå´-15.jpg'] }
                    ],
                    School: [
                        { img: "./img/ÂìàÂ£´Â•á.jpg", name: "Fresh Cream Strawberries", price: "49", id: "backpack-1", images: ['./img/ÂìàÂ£´Â•á-5.jpg', './img/ÂìàÂ£´Â•á-6.jpg'] }
                    ],
                    Travel: [
                        { img: "./img/ÁÜäÁå´.jpg", name: "Farm Raised Eggs", price: "39", id: "backpack-2", images: ['./img/ÁÜäÁå´-11.jpg', './img/ÁÜäÁå´-12.jpg', './img/ÁÜäÁå´-13.jpg'] }
                    ],
                    Sports: [
                        { img: "./img/Â§ßÈ¶ôËïâ.jpg", name: "Fresh Deep Sea Prawns", price: "129", id: "backpack-3", images: ['./img/Â§ßÈ¶ôËïâ-3.jpg'] }
                    ],
                    Business: [
                        { img: "./img/ÁÜäÁå´.jpg", name: "Original Cut Snow Beef", price: "199", id: "backpack-4", images: ['./img/ÁÜäÁå´-14.jpg', './img/ÁÜäÁå´-15.jpg'] }
                    ]
                }
            }
        };

        let pageStack = ['home'];
        let slideInterval;
        let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        let currentGoods = null;
        let currentCat = '';
        let currentSubCat = 'All';
        let detailSlideIndex = 0; // ËØ¶ÊÉÖÈ°µËΩÆÊí≠ÂΩìÂâçÁ¥¢Âºï

        // ÂàùÂßãÂåñËΩÆÊí≠
        function initSwiper() {
            let slides = document.querySelectorAll('.slide');
            let i = 0;
            if (slideInterval) clearInterval(slideInterval);
            slideInterval = setInterval(() => {
                slides[i].classList.remove('active');
                i = (i + 1) % slides.length;
                slides[i].classList.add('active');
            }, 3000);
        }

        // È°µÈù¢Âä†ËΩΩÂàùÂßãÂåñ
        window.addEventListener('DOMContentLoaded', function () {
            initSwiper();
            initTouchCloseBigImg();
            updateCartUI();
            setTimeout(() => {
                document.getElementById('customModal').classList.add('active');
            }, 1000);
        });

        // È°µÈù¢ÂàáÊç¢
        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
        function navigateTo(id) {
            pageStack.push(id);
            showPage(id);
        }
        function goBack() {
            closeBigImg();
            if (pageStack.length > 1) {
                pageStack.pop();
                showPage(pageStack[pageStack.length - 1]);
            }
        }

        // Ê∏≤Êüì‰∫åÁ∫ßÂàÜÁ±ªÂØºËà™
        function renderSubCatNav(catName) {
            const subcatNav = document.getElementById('subcatNav');
            const subCats = catData[catName].subCats;
            let html = '';
            subCats.forEach(subCat => {
                const isActive = subCat === currentSubCat ? 'active' : '';
                html += `<span class="subcat-item ${isActive}" onclick="changeSubCat('${subCat}')">${subCat}</span>`;
            });
            subcatNav.innerHTML = html;
        }

        // ÂàáÊç¢‰∫åÁ∫ßÂàÜÁ±ª
        function changeSubCat(subCatName) {
            currentSubCat = subCatName;
            document.querySelectorAll('.subcat-item').forEach(item => {
                item.classList.remove('active');
                if (item.textContent === subCatName) {
                    item.classList.add('active');
                }
            });
            renderCatGoods(currentCat, currentSubCat);
        }

        // Ê∏≤ÊüìÂàÜÁ±ªÂïÜÂìÅÂàóË°®ÔºàÊó†ÊîπÂä®ÔºåÂ§çÁî®ÂéüÊúâÈÄªËæëÔºåÁÇπÂáªÊó∂‰ºö‰º†ÈÄíÂåÖÂê´imagesÁöÑÂïÜÂìÅÊï∞ÊçÆÔºâ
        function renderCatGoods(catName, subCatName) {
            const list = document.getElementById('catList');
            list.innerHTML = '';
            const products = catData[catName].products[subCatName];
            let html = '';
            products.forEach(goods => {
                html += `
                <div class="cat-goods-item" onclick='goToDetail(${JSON.stringify(goods)})'>
                    <img src="${goods.img}" class="cat-goods-img" alt="${goods.name}" onerror="this.src='https://via.placeholder.com/180x180?text=Product+Image'">
                    <div class="cat-goods-info">
                        <div class="cat-goods-name">${goods.name}</div>
                        <div class="cat-goods-price">${goods.price}</div>
                    </div>
                </div>`;
            });
            list.innerHTML = html;
        }

        // ÂàÜÁ±ªÈ°µÈù¢Ë∑≥ËΩ¨
        function goCat(name) {
            if (!catData[name]) return;
            currentCat = name;
            currentSubCat = 'All';
            document.getElementById('catName').innerText = name;
            renderSubCatNav(name);
            renderCatGoods(name, 'All');
            navigateTo('category');
        }

        // ÂïÜÂìÅËØ¶ÊÉÖÈ°µ - Ê∏≤ÊüìÂ§öÂõæËΩÆÊí≠ÔºàÊó†ÊîπÂä®ÔºåÂÖºÂÆπÂàÜÁ±ªÂïÜÂìÅÁöÑimagesÂ≠óÊÆµÔºâ
        function renderDetailSwiper(images) {
            const slidesContainer = document.getElementById('detailSlides');
            const indicatorContainer = document.getElementById('detailIndicator');
            slidesContainer.innerHTML = '';
            indicatorContainer.innerHTML = '';
            detailSlideIndex = 0;

            // Ê∏≤ÊüìËΩÆÊí≠ÂõæÁâá
            images.forEach((img, index) => {
                const slide = document.createElement('img');
                slide.className = `detail-slide ${index === 0 ? 'active' : ''}`;
                slide.src = img;
                slide.alt = `Product image ${index + 1}`;
                slide.onerror = () => slide.src = 'https://via.placeholder.com/375x300?text=Detail+Image';
                slide.onclick = () => openBigImg(img);
                slidesContainer.appendChild(slide);

                // Ê∏≤ÊüìÊåáÁ§∫Âô®
                const dot = document.createElement('span');
                dot.className = `indicator-dot ${index === 0 ? 'active' : ''}`;
                dot.onclick = () => goToDetailSlide(index);
                indicatorContainer.appendChild(dot);
            });
        }

        // ËØ¶ÊÉÖÈ°µËΩÆÊí≠ÊéßÂà∂
        function goToDetailSlide(index) {
            const slides = document.querySelectorAll('.detail-slide');
            const dots = document.querySelectorAll('.indicator-dot');
            if (index < 0 || index >= slides.length) return;
            slides[detailSlideIndex].classList.remove('active');
            dots[detailSlideIndex].classList.remove('active');
            detailSlideIndex = index;
            slides[detailSlideIndex].classList.add('active');
            dots[detailSlideIndex].classList.add('active');
        }

        function prevDetailSlide() {
            goToDetailSlide(detailSlideIndex - 1);
        }

        function nextDetailSlide() {
            goToDetailSlide(detailSlideIndex + 1);
        }

        // ÂïÜÂìÅËØ¶ÊÉÖÈ°µË∑≥ËΩ¨ÔºàÊó†ÊîπÂä®ÔºåÂêåÊó∂ÊîØÊåÅÈ¶ñÈ°µÂíåÂàÜÁ±ªÂïÜÂìÅÁöÑimagesÂ≠óÊÆµÔºâ
        function goToDetail(goods) {
            if (!goods) return;
            currentGoods = goods;
            // Ê∏≤ÊüìÂ§öÂõæËΩÆÊí≠Ôºö‰ºòÂÖàÁî®Ëá™ÂÆö‰πâimagesÔºåÊ≤°ÊúâÂàôÁî®‰∏ªÂõæ
            renderDetailSwiper(goods.images || [goods.img]);
            document.getElementById('detailName').innerText = goods.name;
            document.getElementById('detailPrice').innerText = goods.price;
            navigateTo('detail');
        }

        // Â§ßÂõæÂºπÁ™ó
        function openBigImg(src) {
            document.getElementById('bigImg').src = src;
            document.getElementById('bigImgModal').style.display = 'flex';
        }
        function closeBigImg() {
            document.getElementById('bigImgModal').style.display = 'none';
        }
        function initTouchCloseBigImg() {
            const modal = document.getElementById('bigImgModal');
            let startY = 0;
            modal.addEventListener('touchstart', e => { startY = e.touches[0].clientY; });
            modal.addEventListener('touchend', e => {
                const endY = e.changedTouches[0].clientY;
                if (Math.abs(endY - startY) > 50) closeBigImg();
            });
        }

        // Ë¥≠Áâ©ËΩ¶Áõ∏ÂÖ≥Ê†∏ÂøÉÈÄªËæë
        function goToCart() {
            renderCartList();
            navigateTo('cart');
        }

        // Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶
        function addToCart() {
            if (!currentGoods) {
                showAlertModal('Please select a product first!', 'Tip');
                return;
            }
            const exist = cartItems.find(item => item.id === currentGoods.id);
            if (exist) exist.quantity++;
            else cartItems.push({ ...currentGoods, quantity: 1 });
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            updateCartUI();
            showAlertModal('Added to cart successfully!', 'Success');
        }

        // Ë¥≠Áâ©ËΩ¶ÂïÜÂìÅÊï∞ÈáèÂ¢ûÂáè
        function increaseCartItem(id) {
            const item = cartItems.find(x => x.id === id);
            if (item) item.quantity++;
            saveCartAndUpdateUI();
        }
        function decreaseCartItem(id) {
            const idx = cartItems.findIndex(x => x.id === id);
            if (idx === -1) return;
            if (cartItems[idx].quantity > 1) cartItems[idx].quantity--;
            else cartItems.splice(idx, 1);
            saveCartAndUpdateUI();
        }

        // Âà†Èô§Ë¥≠Áâ©ËΩ¶ÂïÜÂìÅ
        async function deleteCartItem(id) {
            try {
                await showConfirmModal('Confirm Delete', 'Are you sure to delete this product?');
                cartItems = cartItems.filter(item => item.id !== id);
                saveCartAndUpdateUI();
                showAlertModal('Deleted successfully!', 'Success');
            } catch (error) {
                return;
            }
        }

        // ‰øùÂ≠òË¥≠Áâ©ËΩ¶Âπ∂Êõ¥Êñ∞UI
        function saveCartAndUpdateUI() {
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            updateCartUI();
            renderCartList();
        }

        // Êõ¥Êñ∞Ë¥≠Áâ©ËΩ¶ËßíÊ†áÂíåÊÄª‰ª∑
        function updateCartUI() {
            const total = cartItems.reduce((s, i) => s + i.quantity, 0);
            document.getElementById('cartBadge').textContent = total;
            calculateCartTotal();
        }

        // ËÆ°ÁÆóË¥≠Áâ©ËΩ¶ÊÄª‰ª∑
        function calculateCartTotal() {
            let total = 0;
            cartItems.forEach(item => {
                const m = item.price.match(/\d+/);
                if (m) total += parseFloat(m[0]) * item.quantity;
            });
            if (document.getElementById('cartTotalPrice')) {
                document.getElementById('cartTotalPrice').textContent = `JMB: ${total}`;
            }
            return total;
        }

        // Ê∏≤ÊüìË¥≠Áâ©ËΩ¶ÂàóË°®
        function renderCartList() {
            const cartList = document.getElementById('cartList');
            const empty = document.getElementById('cartEmpty');
            const footer = document.getElementById('cartFooter');
            cartList.innerHTML = '';

            if (cartItems.length === 0) {
                empty.style.display = 'block';
                footer.style.display = 'none';
                return;
            }

            empty.style.display = 'none';
            footer.style.display = 'flex';
            let html = '';

            cartItems.forEach(item => {
                html += `
                <div class="cart-item" onclick="openCartItemDetail('${item.id}')">
                    <img src="${item.img}" class="cart-item-img" alt="${item.name}" onerror="this.src='https://via.placeholder.com/80x80?text=Product'">
                    <div class="cart-item-info">
                        <div>
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.price}</div>
                        </div>
                        <div class="cart-item-control">
                            <button class="cart-btn" onclick="event.stopPropagation(); decreaseCartItem('${item.id}')">-</button>
                            <span class="cart-count">${item.quantity}</span>
                            <button class="cart-btn" onclick="event.stopPropagation(); increaseCartItem('${item.id}')">+</button>
                            <span class="cart-delete" onclick="event.stopPropagation(); deleteCartItem('${item.id}')">Delete</span>
                        </div>
                    </div>
                </div>`;
            });

            cartList.innerHTML = html;
            calculateCartTotal();
        }

        // Ë¥≠Áâ©ËΩ¶ÂïÜÂìÅË∑≥ËΩ¨ËØ¶ÊÉÖ
        function openCartItemDetail(id) {
            const goods = cartItems.find(x => x.id === id);
            if (goods) goToDetail(goods);
        }

        // Ê∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶
        document.getElementById('checkoutBtn').onclick = async function () {
            try {
                await showConfirmModal('Empty Cart', 'Are you sure to empty the shopping cart?');
                cartItems = [];
                localStorage.setItem('cartItems', JSON.stringify(cartItems));
                updateCartUI();
                renderCartList();
                showAlertModal('Cart cleared successfully!', 'Success');
            } catch (error) {
                return;
            }
        };

        // ÂºπÁ™óÂ∑•ÂÖ∑ÂáΩÊï∞
        function showAlertModal(msg, title = 'Tip') {
            return new Promise((resolve) => {
                const modal = document.getElementById('customModal');
                document.getElementById('modalTitle').textContent = title;
                document.getElementById('modalBody').textContent = msg;
                document.getElementById('modalFooter').innerHTML = `
                    <button class="modal-btn confirm single" onclick="hideModal()">OK</button>
                `;
                modal.classList.add('active');
                const hide = () => {
                    modal.classList.remove('active');
                    resolve();
                };
                window.hideModal = hide;
            });
        }

        function showConfirmModal(title, msg) {
            return new Promise((resolve, reject) => {
                const modal = document.getElementById('customModal');
                document.getElementById('modalTitle').textContent = title;
                document.getElementById('modalBody').textContent = msg;
                document.getElementById('modalFooter').innerHTML = `
                    <button class="modal-btn cancel" onclick="hideModal(false)">Cancel</button>
                    <button class="modal-btn confirm" onclick="hideModal(true)">Confirm</button>
                `;
                modal.classList.add('active');
                const hide = (isConfirm) => {
                    modal.classList.remove('active');
                    if (isConfirm) resolve();
                    else reject();
                };
                window.hideModal = hide;
            });
        }

        function hideModal(isConfirm) {
            const modal = document.getElementById('customModal');
            modal.classList.remove('active');
        }
    </script>
</body>

</html>